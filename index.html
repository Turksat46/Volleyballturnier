<!DOCTYPE html>
<html>
    <head>
        <title>Volleyballturnier</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Kerem Okumus">
        <link rel="stylesheet" href="style.css">
        <!-- Font Awesome Icons -->
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    </head>
    <body>
        <div id="header">
            <img id="logo" src="gsgdlogo.jpg" alt="Logo">
            <h2 id="title"><b>Volleyball-Turnier</b></h2>
        </div>

        <div id="live">
            <h4>Vorspiele</h4>
            <table><b>1. Runde</b>
                <tr>
                    <td>Sikijax</td>
                </tr>
            </table>
        </div>

        <div id="teams">
            <h4>Die Teams</h4>
                <table id="teamstabelle">
                    <tr>
                        <th>Sikijax (TGII-3)</th>
                        <th>Jyxen</th>
                        <th>Freakslabor</th>
                        <th>Lehrer</th>
                        <th>Blyat</th>
                    </tr>
                    <tr>
                        <td>Kerem Okumus</td>
                        <td>Benedikt Ocker</td>
                    </tr>
                    <tr>
                        <td>Marco Fruck</td>
                        <td>Adolf Müller</td>
                    </tr>
                    <tr>
                        <td>Patrick Pohl</td>
                        <td>Mister Senor</td>
                    </tr>
                    
                </table>
        </div>

        <!--Musik-->
        <div id="music">
            <h4>Musik</h4>
            <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/45WkQXWa5GDSEzgBWl67iF?utm_source=generator&theme=0" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
            <p><b>
                Dir gefällt nicht, was du siehst und möchtest gerne deinen Lieblingssong hören?
                Dann füge hier den Spotifylink vom Song ein! (Nicht jeder Vorschlag wird angenommen. Song muss zur Situation passen!)
            </b>
            </p>
            <form>
                <input id="songurlinput" type="url" id="songvorschlag" placeholder="Hier den Link einfügen...">
                <button id="sendenknopf" type="button">Senden</button>
            </form>
        </div>
    </body>
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-firestore.js"></script>
    <script type="text/javascript">
        (function() {
            var firebaseConfig = {
      apiKey: "AIzaSyAOSmzspw8tLhZK9IhGzneEwQ75lKC2LrY",
      authDomain: "volleyballturnier-ef732.firebaseapp.com",
      projectId: "volleyballturnier-ef732",
      storageBucket: "volleyballturnier-ef732.appspot.com",
      messagingSenderId: "1041265159872",
      appId: "1:1041265159872:web:1a33da8b87db16155d4725",
      measurementId: "G-696TF0V0E8"
    };
    
          firebase.initializeApp(firebaseConfig);
    
          var push_to_firebase = function(data){
            
            var db = firebase.firestore();
    
            db.collection("songrequests").add({
                url: data["url"],
                timestamp: Date.now()
            })
            .then(function(docRef) {
                alert("Dein Lieblingssong wurde erfolgreich eingereicht! ID: ", docRef.id)
                console.log("Message sent, ID: ", docRef.id);
                location.reload();
            })
            .catch(function(error) {
                alert("Oh-oh! Es ist ein Fehler entstanden! Ein Fehlerprotokoll wurde erstellt und verschickt!")
                console.error("Message could not be sent: ", error);
            });
          }
    
          var contact_submit = function(){
            var url = document.getElementById("songurlinput");
            var data = {
              "url": url.value
            }
            push_to_firebase(data);
          }
    
          document.getElementById("sendenknopf").addEventListener("click", contact_submit);
        })();
      </script>        
</html>